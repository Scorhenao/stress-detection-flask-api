<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Detector de Estr√©s ‚Äì IA</title>

    <!-- BOOTSTRAP -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <style>
      body {
        background: #f2f4f7;
      }
      .card {
        border-radius: 15px;
      }
      .btn-primary {
        background-color: #0d6efd;
        border-radius: 10px;
      }
      .resultado-box {
        background: white;
        padding: 20px;
        border-radius: 12px;
        box-shadow: 0px 3px 10px rgba(0, 0, 0, 0.1);
      }
      .title {
        font-weight: bold;
        color: #0d6efd;
      }
    </style>
  </head>
  <body>

    <div class="container py-5">

      <!-- T√çTULO -->
      <div class="text-center mb-4">
        <h1 class="title">üî¨ Detector de Estr√©s Basado en IA</h1>
        <p class="lead">
          Ingrese las se√±ales fisiol√≥gicas para estimar el nivel de estr√©s
        </p>
      </div>

      <!-- TARJETA DEL FORMULARIO -->
      <div class="card shadow p-4 mx-auto" style="max-width: 700px">
        <form id="formulario">
          <div class="row g-3">

            <div class="col-md-6">
              <label class="form-label">
                ECG Mean
                <span title="Promedio del latido card√≠aco. Valores m√°s altos suelen indicar mayor activaci√≥n f√≠sica o estr√©s.">‚ùî</span>
              </label>
              <input type="number" class="form-control" step="any" name="ecg_mean" required />
            </div>

            <div class="col-md-6">
              <label class="form-label">
                ECG Std
                <span title="Variaci√≥n del ritmo card√≠aco. La irregularidad puede aumentar durante situaciones de estr√©s.">‚ùî</span>
              </label>
              <input type="number" class="form-control" step="any" name="ecg_std" required />
            </div>

            <div class="col-md-6">
              <label class="form-label">
                EDA Mean
                <span title="Promedio de la actividad electrod√©rmica (sudoraci√≥n). Es uno de los indicadores m√°s fuertes de estr√©s.">‚ùî</span>
              </label>
              <input type="number" class="form-control" step="any" name="eda_mean" required />
            </div>

            <div class="col-md-6">
              <label class="form-label">
                EDA Std
                <span title="Cambios en la sudoraci√≥n de la piel. Variaciones altas pueden indicar tensi√≥n emocional.">‚ùî</span>
              </label>
              <input type="number" class="form-control" step="any" name="eda_std" required />
            </div>

            <div class="col-md-6">
              <label class="form-label">
                Resp Mean
                <span title="Promedio del ritmo respiratorio. La respiraci√≥n suele acelerarse con el estr√©s.">‚ùî</span>
              </label>
              <input type="number" class="form-control" step="any" name="resp_mean" required />
            </div>

            <div class="col-md-6">
              <label class="form-label">
                Resp Std
                <span title="Variabilidad del ritmo respiratorio. Una respiraci√≥n irregular puede indicar ansiedad o estr√©s.">‚ùî</span>
              </label>
              <input type="number" class="form-control" step="any" name="resp_std" required />
            </div>

          </div>

          <button class="btn btn-primary w-100 mt-4" type="submit">
            Predecir Estr√©s
          </button>
        </form>
      </div>

      <!-- RESULTADOS -->
      <div
        id="resultado"
        class="resultado-box mt-4 mx-auto"
        style="max-width: 700px; display: none"
      >
        <h4 class="mb-3">Resultado:</h4>
        <p><strong>Nivel Estimado:</strong> <span id="nivel"></span></p>
        <p><strong>C√≥digo:</strong> <span id="codigo"></span></p>
      </div>
    </div>

    <script>
      document.getElementById("formulario").addEventListener("submit", async (e) => {
        e.preventDefault();

        const datos = Object.fromEntries(new FormData(e.target));

        const res = await fetch("/predict", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(datos),
        });

        const data = await res.json();

        document.getElementById("resultado").style.display = "block";
        document.getElementById("nivel").innerText = data.estado_estres;
        document.getElementById("codigo").innerText = data.prediccion_num;
      });
    </script>

  </body>
</html>
